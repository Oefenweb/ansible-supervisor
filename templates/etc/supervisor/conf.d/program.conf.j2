; {{ ansible_managed }}

[program:{{ item.key }}]
command={{ item.value.command }}
{% if item.value.directory is defined %}
directory={{ item.value.directory }}
{% endif %}
{% if item.value.environment is defined %}
environment={{ item.value.environment }}
{% endif %}
{% if item.value.autostart is defined %}
autostart={{ item.value.autostart | default(false) | bool | to_json }}
{% endif %}
{% if item.value.autorestart is defined %}
autorestart={{ item.value.autorestart | default(false) | bool | to_json}}
{% endif %}
{% if item.value.startretries is defined %}
startretries={{ item.value.startretries }}
{% endif %}
{% if item.value.startsecs is defined %}
startsecs={{ item.value.startsecs }}
{% endif %}
{% if item.value.stdout_logfile is defined %}
stdout_logfile={{ item.value.stdout_logfile }}
{% endif %}
{% if item.value.stdout_logfile_maxbytes is defined %}
stdout_logfile_maxbytes={{ item.value.stdout_logfile_maxbytes }}
{% endif %}
{% if item.value.stderr_logfile is defined %}
stderr_logfile={{ item.value.stderr_logfile }}
{% endif %}
{% if item.value.stderr_logfile_maxbytes is defined %}
stderr_logfile_maxbytes={{ item.value.stderr_logfile_maxbytes }}
{% endif %}
{% if item.value.user is defined %}
user={{ item.value.user }}
{% endif %}
{% if item.value.numprocs is defined %}
numprocs={{ item.value.numprocs }}
{% endif %}
{% if item.value.process_name is defined %}
process_name={{ item.value.process_name }}
{% elif item.value.numprocs | default(1) > 1 %}
process_name=%(program_name)s-%(process_num)s
{% endif %}
{% if item.value.stopsignal is defined %}
stopsignal={{ item.value.stopsignal }}
{% endif %}
{% if item.value.stopwaitsecs is defined %}
stopwaitsecs={{ item.value.stopwaitsecs }}
{% endif %}
{% if item.value.stopasgroup is defined %}
stopasgroup={{ item.value.stopasgroup | default(false) | bool | to_json }}
{% endif %}
{% if item.value.killasgroup is defined %}
killasgroup={{ item.value.killasgroup | default(false) | bool | to_json }}
{% endif %}
